package handler;
import java.util.*;
import java.util.ArrayList;
import java.util.List;
import java.util.stream.Collectors;
import java.util.Arrays;
import dao.TransactionDao;
import dao.UserDao;
import dto.TransactionDto;
import dao.ItemDao;
import dto.ItemDto;
import java.util.ArrayList;
import java.util.List;

import dto.TransactionType;
import dto.UserDto;
import org.apache.commons.codec.digest.DigestUtils;
import org.bson.Document;
import request.ParsedRequest;
import response.HttpResponseBuilder;
import response.RestApiAppResponse;

public class GetItemsHandler implements BaseHandler {

    public HttpResponseBuilder handleRequest(ParsedRequest request) {
try {
   ItemDao item=ItemDao.getInstance();
List<ItemDto> ItemList = item.getAll();

    if (ItemList.isEmpty()) {//       //insert initial itemlist to mongo DB

        String itemName1="Iphone15";
        String imageURL1="data:image/webp;base64,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";
        double itemCost1=999.0;
        String itemName2="the Towel";
        String imageURL2="https://m.media-amazon.com/images/I/71MwVVtwcVL.__AC_SX300_SY300_QL70_FMwebp_.jpg";
        double itemCost2=9.0;
        String itemName3="frog";
        String imageURL3= "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHCBUVFRgVFRUYGRgYGBgYGBgaGBgYGhgaGRgcGRwZGBgcIS4lHCMrHxgYJjgnLi8xNTU1HCQ7QDszPy40NTEBDAwMEA8QHhISHzQrJSs0NDQ0NTE0NDQ0NDQ0NDQ2NDQ0NDQ0NDQ0NDY0NDQ0NDQ0NDQ0NDQ0NDQ0NDY0NDQ0NP/AABEIAKgBLAMBIgACEQEDEQH/xAAbAAACAwEBAQAAAAAAAAAAAAACBAABAwUGB//EADsQAAIBAwIEBAQFAwMDBQEAAAECEQADIRIxBAVBUSIyYXEGE4GRQqGx0fAUUsFi4fEjgpIzQ1OishX/xAAaAQADAQEBAQAAAAAAAAAAAAAAAQIDBAUG/8QAKxEAAgIBAwMCBQUBAAAAAAAAAAECEQMSITEEQVETIjJhcZGhI4GxwfAF/9oADAMBAAIRAxEAPwBFblGtykg9Gr1hpOKh0XK0F2kg9WHo0gPLcrRXpBXrVXooB1XrQNSiPWoegBkPUL1hqoddRIBjXRo9K66sPWEo2UPK9ao9Iq9b23rGUAH0emENIo1MK1c84DQ2DRBqwDUQasJRKs0mhJoS1UTWbiMjGs3NEzVkxqUhMBzSzmtnNLXDWsESxe6aTuNTFxqTumu3GhmNxqxZqJ2pdmrqihoMtQMaotQk1skMKaqaDVVTVpAETQk0JNVNOgCNUaqak0UBU1VWaqlQgw9ELlJh6v5tUZ0OG5Vh6SFytFeqCh5Xo1uUkr0fzKKGPrdo1vVzfnVYv1DoVHU+ZVG7SCXa2V6zYUNrcrRXpRWrRGqaCh1Wre29IK9bo9TKIzpI9bo9IWSSQACScADJJ9BTt1VQhXuIrkToks0b50ggY6Vj6MpfCiuwwr0QesYIE4IPUGR/tVh655Y2nTQzfVVF6pLLnZGPsrUZ4S7/APG//g37VDwyfYZkzUDNR3rLL5kZfdSP1rJVBBZmCIMFj3OwUfiPp+lQsUnLSluIyZqXuNU4/nHDWkd2DFR4UJks7nIAVdhgnrgb1pwvBXrqa/laNyFD68TAzA0k9jt3mut9DkjHV/AlvwIXTSd00zfBBIIgjBBwRSV40QQC1xqwZqK41Ys1dUEUFqqaqz1VNVaoYZNUTQFqHVVIRpNUTQaqotVAHqqaqy1VNVOgNZqprPVU1UCaFPmVXzKUL1A9IKHVuUQu0mHohcoChz51T5lJi5Rh6KChxXo1alFetFelQUOo9bI9ILcrRXpaQo6KvRq9JK9bW6WkKHEambZpS2aZRqlxCjuLfHDrggPEu3VZAIRe2Dk+4ryfxJy4IG4uyCtxSXeS0MJEkid5Jye1eS5rzTiFvm5qcPqJZmnS0kkDT5SoGwzt6V3OVfE168r27yyrq0kLp3Uyfb9664x08FtbHv8AkHGrhX8jqGGNtQn/ADXZ4jmqWEX5KKWJ0qwGouZG5ORufqK+cch49msW2bLaCJIzAJUE+5/Suna412TQSxjyrJIHsKzm0vqYKTjaO+/xPefwswWeoEsPSPb0pPiOakksr3ZnILQD0wVPh6CBFc67ZKRrQwdhOk++QaVAFZtuqZDlI9Ry74mbX/1bh0hWIENEgbErk7R1rh8y503FXPLpUMdKKIAEeaO53NY/J1CVHvHrTF/kxQqwaSILkZVZE+br1wKqO49TcaEuJ4Zbl7hbTFfO9wziQiADfsx29DXZ5p8Q2uHUq10IUBlQfG5jZF2JxOYG0kV5LmbFb9i7MeM2nPbWDB+v+Ky4j4Q+YxdrjMWzIPT6g1vqWxrjSpHab4lt8c7OiMhAXUG0y241eHA8tY3TR8Jyy3w9oKoy7apJLEgCJJPr2xg1jcavMzV6joqXItcrBjWtw0u1XBgUXqtVAxoC9aoZsWoS9ZaqHVVIKNtdVrrLVU1VQGuqqLVnqqaqBGmqpqrKavVQBypopoBV0wD1VNVZzV1QzQPRh6xFEBQIYV6NXrBa0VqVDGENao1LK1aK1OgHEemUekEat0eihHRR6YR6Y+GeFS45NwalGyTEn1Ir0Tcu4NyVCvacdm1CfUGlKKqxJNukeU4i0jQXwIgmYBM4n+dK5PNOYJBsWAGdxoUL0kEFj7CvTcx5eiKbVxw2plONisGCT06/cUnwXK+HsqTbVQ5jxbADfzHf2pRnsXLbZrdCPBcObYVRPhUJ9gBNNWmYPqmNJBkb47etbuiqPOJz1pS9cQGNXrjpU73bMN7NuJ4hgSWJcb6jnfvWa8Wu8TiNsD1qrvGqI0rI0wZrHh9ByFjPf9KJNconSzt8pt6NV3+0YA2JbEV1OGsBkLMjMoA0wx64KmNzXEs8zZEKMJSMDaOxEVrwfNymVeJ6dO21UpRVLsPTLwa86+HPmo6qp0soIjdSNjnrIrzvKrnF22W1ct6xsLmoAQMDUDnp2r1S88eILTPWM/z96X//AKCzJifbNDnHsaQ1pUkcziLhJz0x7R0pRzTnMSdbzg6s+/X85pG5Xnv4nYfUwdqXY1s9YsK1iUYPQE1q4rFq2iNFE1U1VVWiGHqqtVDUp0AeqpNBNXQILVVzWdFSaEc6pRCpTAELRBagFEBVDIBRAVAKKKAIKIVAtEFosCCtFqlWtFWmAS1ulZqtarVUI9H8OXdCu3UbUdvmOpzJgn965fLLkBh3FDft6jO0VEvkOElGds7/ADbhdaa9mjB6Yz+hNeQ4ziLiEqTMEj0xXf4Dm+BZuHE4B9QVwfY0lx/LoXeRMA9Y6SftXFbS8UepGMZS926Z565zhwfJ/wDY/tSt7mjnoo+/705e4Ig7Uld4Y9qqM7N/QxrhIq1zi4u2n7Vqed3YkaR9P96WHCHtRf0Z7U3KI1ghzSDuc1vtu5+kD9KlviLv97/+Rq7fBN2p/h+EI6Um/BooRj2KS453Zj7k13OUcPqZFOzMB/n/ABSnD8GT0r23w9wIRQzKCTnP4VXJP5AfWs8aue5n1DSg6Hbvwqju7vdgM7NpUAEAmYkn/FbL8PcCg8ZZvXWf8QKU5rzUBR4swAc9fQV5fiONeSST6AzgVtjeOTdI4MnTqEdTS/c6nPeB4TSfk6g6ie6mO815Fq7nEXf+mWJyQfzrgsaMlJrY4bTewLil3rZmrFqcQAmqNWRUitUMGrAo9NXppgZxRKKMCiC06FYISr0VqootNFCs4tQCunf5PcQwQOnXoesdKy/oXG6x69DULJB8NFUKqlaBK2Xh26iPU9fbvQhDMRmmpJ8MQAWiC1u9qOoP87UIWqVMAQtGEq1WjiqCwAlEBRRRAUwsta9Nyz4fQoLl9yobKosaiO5nYVx+WcPLq7g6ActBie016TjuLATUD/O1RkyKEbHCLlJRQles2UxbLb51RXPdpLQaC1cLBmB/EK2ZCF1GIO1Z4puStlZsahKkeW5qW1HJ6kHtXqPhbm44i3ouf+oozP8A7ijGpf8AUOo61xeZ2C49a4vCXHtsNJKspweoIqciW6O7C3OKrse+4jl0ZAlf0pU8tB6V0eSc9S+oDQlw4I/C59Ox9K6jcOJwIPauRvRydUZt7M8/a5RPSujZ5AsZ/SurZSMFYptF9qFK2U5vseffkoHShHLAOlemP39qBbYnIk9B0q9ceLI1vuc7gOVg+JhC/m3+1L/E3NPkKUUjW3nj8CdF9z+lOc45wtrwJ4n6xsnv6+leJ5hdDBpYF3mTknaZnrVvZUiVvLVLhGdjmJclj0yJ2mtLAYnU2Sc/eufwixgD0rq2/c1tjhpR5/V5vUltwdXg+IVNwDiAGEia3fkqXlJUhXOxHlJ7V5fjuMhgo6V1uU8yOnSSfSk8nu0y4EumbxalycfjuFe05R1gj8/UUrNd34h4r5gUnzCR6xXCihqnSMFfcompNSKkVSYFg1dDRCtEBYo1NBVimBqpoprMGioEese9p1PE4yx2wI/LVEenpWPzkcAucDVKDBIGVn8687e5wXgahvOmMEjfUB3irbmAnVC6dRInB2zH7V4CwSXJvZ0RxNvAZYAAmeq7YP8AN6za+mqFQBTO0knGM9Otcn+tVywgbEsd8jtJ/k0XDce2mMHdYIgR39629NpdyQOK4hQxCrEGB17D96r5gWNQIPYjf2BrZbqyCFAPRQcEjqcye/bJoGYSGZTnbOwmNo6kVsptKtwdArxAIPhj8sVLbljgY+wzQveOmQFUghWMDGSpPtjf1FU66QQGBGCGBmetWskkLY1ZwP8ANeh+HeRLfAd30oTAUeZu5HYCvL3OLQIy9dONw2O5rr/DXFRw7DUQ2ojETB6T2z+ZrSOeUVqka4MHrT0o9dzRrNqzosyE1AAMQ2orlixHQ7V4HiuauAVYgx6RicV1+DYEMsyASY7EwT+lcjmoS2WdgSGGmInOftj9KmXULJJwrbaj049CscVNtbXf0N+V3F1jxRqie1en4zhfKIxHSvlCu3Qn0ycV2uXfE3EWxpJ1r2aZ+hreEXBPucHUOOVqtqPVXuDKnVBnp/xXGbg7d1yhXS8H2P8ADT3Dc1TiF1KzKw8yE5X1B6j1pXm3DA6XUkEbx0zmR6itoKMmrW3fyjmjKcE1F7/hnn+JtsjhB4QCcmZ+pr0HKviq9ZGi8DdTofxqPRvxD3rLjVNxCGALqJBH4hG89f8AmuDxnDPpwTHUdK3z48cPZPe+GVgnly++HblH0ngPjHhXH/qhf9LjTH1OD9661j4gsBSBctwd/Ep/zXxS3wTHrTPDctbcjrivN9GKftlX5PSTm47xv8H1PjPi/hrYP/UDf6bYLH8sfc15zivi7iOIlOHtlFO7buw/Ra88/CC2NVwyY8vbtNK2eaXNWm1jUdxvXXHoYRipSb38819DjfVScnGKW32PR2lugeQqf7mON5zWLoxO4PQEHHtTvLeLBA+b49t/5iunxPG2ingQKfU6jRoxxdxb/cyydRkl7WvscgJCAY1bn0o0eEJOYq7aZzt6b70t8QXfl2gsZc4I/t61PLM1C2jjm/qYse9O8LdMiKQ5XwbXSQuIzXqbnJtHDC5+LVDe1YSwt+5npT6rHCOlcnMv3CxzWNWaqhM8xu3bJVVcVK0QgSKICrAogtaIAYqwKOKsCqEwRRTRAVIooQrY4W2CGMkAQNQyT6r0H360TorEsxxGABuN5jYzUS7OFU9FGoggLOY2mR16R60ZcGGMbiADhVUx032ry23e5rqbMHtqo021La8Ak7YBBGOgIqrFpgIbEGGnf1/OhMtpVfCJlSD2EEqfamLnEKzBVLdCzNktMYH2qm3VAifKGYYbEGB0iYo7bagSCZM+IjTCrjacdaWN4SWUZzInABkQfoa0tXNKsG1MTjTOADsSevX71Li6HQN4FsmQCSD6DvOxFDxF0DQBEDoMGO5rIYVgdszHQn09a2+fbZSVgBNIBMksT/warSJIDi7oBBVQSSDPcdvsaWNskFkJUxmJiBOW6USOpBBjMkt/bOxEbz2rFCYKdcQYiTua2iqRUdnaOv8ADawrljMsv6T/AJFN85KtZYEAYkehBxFea4HiHXUEbcjESCdp/namixLD5zyMmOgInoO0VnPD+prs9WHWwjg0NNumvluRuGDIQAdTKoGPxakOr/xBH/dQ3uFW0YZldoBKq0ssDr07femrXHAKz6FYH+7BE/2xGf2pAW2Zi+QrNhZzHQz7g4NaRcnd8Hl0zOwzo4cKRpgw34h1FeztFbiqR5HAg+/Q+u4rzDsLjGcR4Y3kjt33FdT4Tvj5h4d2w+UPZonT7ED7j1q1Nboa5TXIrxd02WJIPhaCB/8An+dq69nhlfy5kSPUH+bUXOuFDs4jqQTEA9KW5Bw5R9BZiCCRO4I3j3H6Vy5szywSb3X8HudL06xNyS2f4Zvb5ToOE3PWY7H6Vz+N5zbt6lUS4MTp8K/fevWMQBOYn69pP5V534r4ZCivHj1gD/UDOJ+k1h02W8lSNeqUo4m40v8AdjzTa70sx65J3PsK6vJuWDLlSAML39JPc1lyPlTM+sgquwB2J2n2r3drl6LakkBEl3PTwicmvUn1TnNY7+r/AKPFXTaMbyS5fC/s8jzDiBw6h9ILthFO0DdiOwkfWuO3NOIOdQ7+UCsuY8b8+8zsInCr1VBlVH0yfUmtW4YKukkzEgH9IpTavcwTo7XL+VcRdIL3gq4JVPNHYGIBr0D8JZKqXE6MKm5Mdya8zyjnKrAZtLD6elbcJzV7j3W/CzwhGB7D/JrLHBzyfqOoo9XJKGPDeFXJ/c7HIrY/qHuFAqTGhdu1eg+JnT5FxE2QpB6TGRXm+B4vQQqtmCSfywP5tXZ4q4P6K4WImGf/ALmMAe+B96655senbl3t4S4PIl0uZpyl2rfy3z9jxVUaY4a3KnUpUrjeZjFR+HgAg4NcanG6szaowAogKvSagraLEQCjFCKIVqgLiriqFWKpCaIBVxUFFTA48aRDGVaRBggHDCfeitX1W2QXCsQoUASYH4T2AifrSYDAq2O4GYwcA0y3CqzKoCrq6jqR7+9cLSXJrQHzW0geEY3GCZO5FAeKCv4ZMZ3j1kDpWBu+JlWP7dR274nbahW2XbSSAw0gEmB2wZ7gfetFBdyqNbPHESQuytkxG8Y7mt+E4woNTKwJzMag/YemO1JLay2oaVM4mTIH7z9qds8Si29P4wIEj7QCJ9KJJVSQnsLXr8MWK+DVq0gwSSMHNY/OJHl0+KQAdwelMJellVl1T5dIBkTj26/arvWtHn8OcA9cZPqKa22oEJspJHhMwTEg4A/YGmxw2NTFsqC0jbOBI9Jpa0ky39oJjvg/rtR3QzDTqY7aQCSNo2+1UwLt8PqIKSIGcx7H3pjh48x7GCTJLGRJHbFYDUhMgxGnzaTqHsM0Vs7EECO/TOZ/Ok1aGbf1YQKCPEROQCvWIx/Jpq2wYDSDqyNMemkY9B+tc9bzalAmMjadQPSen+5pvWzs2pSABJKsRpUbziCKiS2oGW7wVC76o/ScCliWDawRqVtSxsCGkR6SKy4a82rJEgkDbE1rdSVUK4A1NqmYk9vt0ojFJ0xpnsrnFB11qfONQ9J3rz3H8yKMNBlwcDePf9q5yqygLrZdWSFJx3ntWSp8tgTAEgyY8p39Z3/KsodPFPz8jvf/AEJaNMVT8nfufFUDNltUTlhp2neJrntxrPdVrxMiQF2VfQD/ADSVm45YDQ0QREYZT0YnpTLguWNxRCidQJGnsOxz9atYYR+FVZi+ryyknJ2k7rsex5a4kADH83ovjHjtHDCwhg32AbpCLBb7nSPaa8Py3md63hXx2YBlHt2ouLvteZXe7nbIxA2CgbVhDpnDKpN7I6c/Wwy46SdmlnhgqwRqJIlpJE749NAB/wC4UIRpOnPucAdf3razqUBCSwgFgokqSAD+lBduSCFGMCJlvWa3ttnmcmvB8qa6Q7iFB6fi/wBvXrXevWUtWy2MKTj8I9PU7UfL+LDAaTgxv/MUt8RqrNat2z58spImfwgekhvsK5HKeSdPZH0OjH0nTuS3+fzNvhniFAZ4DM40sGzEdB2itfiq6E+WlonSxLsGOzLGkT2kk/SvOtYe0S1rXAmSdMGMElT6wNuvrFWXe+RraNMbwIEBo07Qa10XNStUvwedPq4Tw6Umm+fA3wvFgyNiJLTBnrj6Df1FdPhSjHM6c599p+orlrbY3IKhNQIGoA+ELksQepx9KwXjwrP4h2XSkYHUrOOvc1Eser4TzjrDhQvh1EkZPv2+1W3Bbx0H59qQ4a+zdYlSSTvPQxsJ+8D6U+LwUDOpdoG47tj1H5RU3OD2YmkKtbIoBTgvqxJJIjVkxmB/B96ytW9UEbESP2munH1O3uIoyFFFataI+5HfagrsjNSVolkqRUq6oZw1vBmkKIUmA2QwGM+1NHmNtQpZACqsBBkE7ic9c/alyiBdKwOhJnHrOaB+Gtk+YyIMYzIkT9jXDUXzwa2BzEBtOkqGcKxAG34hv6QTVMqMAzMFIOCADK/3MJwZHQVm6MzKwQhSYHUE4BM+o6e9WeEBPijAOrOSRt6nvWq2VWPULrdkn+1sEiDgH126UVtgxKKslohm6bTt9q1+XpIWFZYJECCTvmfSnbllVUhSSSsqRCqCRmZ7U9SukgMbtrTq05iMiFjpkdKC9whMLqIEyTl4JEwBIH/FDY4kCVIlZALAtkgZIxtim0lQ+nLEQIPcgZJ2A3qG5RdE8GFpFt+ZCQGHjIgNucqT2H5VjY4kai5UQSTsQFPTSAR06Vo6M7LaDllJMEiRrAIOQJjf70g2pdIGQGJCzI9cj61olfPILcauIqnUGJBY4joRMgms7XFASpUEbE4mJOPXf9KAXHjSRCkLAI3j1+la/Ml4CwoAWO5AzJp1tTKrsNtxgKaV1em0rEyPaIpXh7mrwsSF338wqr9oqCoYQDLQQd/9Q69KiuCwnC4kjeBuYpJKtgLKqqBifOzBVB8WjYap/m1apw40liVmWAHaMf71k7rqYqJSTB3IHQirt3V6acx4iCYnpB/Wh2xlM6jLFpOAREH3pe7ednZSR4oXygDBjEbRnNXbzJYAgksBgb4kDer43hyoUkyYBERjpnttVJJOhM34guFhXJKyG8QyBJw2+woOEcHw3PKM6Z3H71OC4f8AubdZBnqNhAyc/lRNpAlm0s52U6YGZ+kxvS24AptKIpkEvJ0gnCmAA3eIP3pqzwy6dRZSSWEbEQx7+2Pek7rkLCjBM5z3Iz9enahF/SAwIkkz4QWGAck++KTTa2GxtGXwsB1IHr6j6xTdl1JIjAkEkxBySDG/akLJZlChcglpJ3AyIHU1rYtOQWgR4SehkmATO5k5rOUSbN0suhkNpZhqgNmOsxjv962s6gQ5YyWEnUTkCevbFVzBGRkhfEUPXGTj7ZrMO1nzO3ikQpk7DJ+1RyvmytbcavY9IhDWoJD6mJ7YXePXVJz/AHHpXJ4rh7VlQxKi4SZHzGYspEBckjy6s+wxSnEOQkqDpU+Yt1ME7b5xVodSgtJOoEyo8IjoPaojFx77EMY5pzBHVsFZKkgnoc/TY1zxw4ZxpYHUpDYIEKknSN9gZmtrw1KrsEMORpY+IgkBfCPTM1i5KOoATVqYr1MNqGkzjuK0hHTGo/MEOcS6oqgSDp1REajA++49K3fiAyhQh8RB8xBJjKyOmdhXLv8AFeMsVBcTqaZVsHEjY7ZHaKzLkAP5TqGmPKB1id9xU+lsvIzs2LcB1YgMFOWMKCT3O+JgVPmGAZ1aGwFkCNgJaCe+3akbvNtQAaJAA1DoSc7neB+dBeJuMWVfAoCCJOomYAaM5MfSp9N9xNHRXjgcxp8WkbmSBmD+f1p3iGTUQDJ69pnYVxGvZW2u4iTDEqREqFYArk5MGZiabtX0AeT4lUYLZZukE7AmSe0UqlB3GxNDSCdqulrPEaVA0+Jj4jMyT2jEbUxcvhTHauiPUeSdJzFVjPhC6pyY8qx4fUz1rEnTBUEMsnfIEzLD3q6lYorsTh3CWyXL6fMiAjSJlZkjG5rDimKqp1aWLatUbBVgCPtUqVrHn92NGSpeVRE5iTIxq2z061ldW42GYnrpnftn+bVdSrT3GycMhLSIXS0RImfX0qcTxLNKqSBJxC5ExuOlSpVdxES9oDL8wgiAVAHsYxvnpSllZIlsbifzqVKuilydnh7AMs5EFW0QcyQCDpO2a5/DwDME75BHm7mpUrJdy0AlyFYRE/r0NB/TkAMJiNR2n+ZqVK0RBr5lnTggx0j/AIBFG6aVE6WkQADkdBNSpSZRjfvDSqZGk+hBJ6zEiKZ4OxH9rapafNEEj/G1SpSntETCsMELBWUB5CuQ2058IEjIImKNeBXLOS5YEKVyuOpO89h7mpUqJvTuhAWOEEgHUg3yGiOhmiukT4T4pJ0aJEiMknIxGKlSlGTYGNriWQ+IwZJyMqYgj7E0Nji2CQviZmIEnUROZC9z396upWySaGMf1LOVVmYHykHI1DHTtHU9aG3ZN06AqyGPjjxMR0Mn1FSpWb2uiHybX1QeZwfB03VpMDSRkz7RRXL8tpRWLFFBM6hAEksADnb0qVKVKgNONvIpVjnKl9EqwZV8JIaVwTMQJHbc52riaVBUvqYDUZnrkRt0G/U1KlKtl/uwI3S7ZBg2zbMRBVjggCATLHfck74pbiSrAKhOgtpVdpkgklZmJVYntAqVKS8jBt2bSSLqyzJKSpEEsRMbHaOu1OcKGVWWYYAFTAhWG/m3MEwI7+tSpSnwiTHiOHgiSWA6rJckbuTBEFp/fFRFRvKsqQQViGZjsIO0f795lSp1Ohl2FS2h1M2vXCoJkDuJwZIOSdhTKcWn+rp+g9KlSlOKa3Bn/9k=";
        double itemCost3=19.0;
        String itemName4="socks";
        String imageURL4="https://m.media-amazon.com/images/I/71tszb0UKHS._AC_SX679_.jpg";
        double itemCost4=2.0;
        String itemName5="flypan";
        String imageURL5="https://assets.wfcdn.com/im/36421236/resize-h445%5Ecompr-r85/2286/228603618/Starfrit+Aluminum+Non+Stick+9.5%27%27+1+-Piece+Frying+Pan.jpg";
        double itemCost5=95.0;

        String[] imageList = new String[]{imageURL1, imageURL2, imageURL3,imageURL4,imageURL5};
        String[] itemNameList=new String[]{itemName1,itemName2,itemName3,itemName4,itemName5};
        double[] itemCostList=new double[]{itemCost1,itemCost2,itemCost3,itemCost4,itemCost5};
        List<String> imageListAsList = new ArrayList<>(Arrays.asList(imageList));
        List<String> nameListAsList = new ArrayList<>(Arrays.asList( itemNameList));
        List<Double> costListAsList = Arrays.stream(itemCostList)
                .boxed()
                .collect(Collectors.toList());

        for (int i = 0; i < itemNameList.length; i++) {
            String itemName = nameListAsList.get(i);
            Double itemCost = costListAsList.get(i);
            String image = imageListAsList.get(i);

            ItemDto newItem = new ItemDto();
            newItem.setImage(image);
            newItem.setItemName(itemName);
            newItem.setCost(itemCost);
            newItem.setTransactionType(TransactionType.Sell);
            newItem.setBuyId(null);
            newItem.setSellId("1");
            ItemDao insertNewItem = ItemDao.getInstance();
            insertNewItem.put(newItem);
        }


        //retrive from mongoDB
        ItemList = item.getAll();
    }


    RestApiAppResponse<ItemDto> res = new RestApiAppResponse(true, ItemList, "items loaded");
    return (new HttpResponseBuilder()).setStatus(StatusCodes.OK).setBody(res);
}catch(Exception e){
    RestApiAppResponse<ItemDto> res = new RestApiAppResponse(false,(List) null, "Exception error");
    return (new HttpResponseBuilder()).setStatus(StatusCodes.SERVER_ERROR).setBody(res);
}
    }
}
